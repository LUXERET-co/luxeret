<!DOCTYPE html>
<head>
    <meta charset="utf-8"/>
    <title>룩세렛ㅣ계정</title>
    <meta property="og:type" content="website"> 
    <meta property="og:title" content="룩세렛ㅣ계정">
    <meta property="og:description" content="룩세렛ㅣ계정 - 가치에 가치를 더하다">
    <meta property="og:image" content="https://ifh.cc/g/Xm8bFF.png">
    <meta property="og:url" content="https://luxeret.com">
    <meta name="description" content="룩세렛ㅣ계정관리 페이지 입니다.">
    <meta content="width=device-width, initial-scale=1" name="viewport"/>
    <link href="luxeret.css" rel="stylesheet" type="text/css"/>
    <link rel="preconnect" href="https://cdn.jsdelivr.net" />
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin />
    <link href="https://cdn.jsdelivr.net/gh/toss/tossface/dist/tossface.css" rel="stylesheet" type="text/css" />
    <style>
        .tossface {
          font-family: Tossface;
          font-size: 1.5rem;
        }
      </style>
    <meta name="naver-site-verification" content="483992bf4f969c4ad1b7b46d46bccc6257d5c97b" />

    <link rel="apple-touch-icon" sizes="180x180" href="/assets/image/apple-touch-icon.png">
<link rel="icon" type="image/ico" sizes="32x32" href="/assets/image/favicon.ico">
<link rel="icon" type="image/ico" sizes="16x16" href="/assets/image/favicon.ico">
<link rel="manifest" href="/assets/image/browserconfig.xml">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
</head>
<script>
  
    window.addEventListener('scroll', function() {
      var footer = document.querySelector('.footer');
      var mobilePopup = document.querySelector('.mobile_popup');
  

      var footerTop = footer.offsetTop;
      var scrollPosition = window.scrollY + window.innerHeight;
  
      if (scrollPosition >= footerTop) {
        mobilePopup.style.display = 'none';
      } else {
        mobilePopup.style.display = 'flex';
      }
    });
  </script>


<body>
  
    <div class="page-wrapper">
        <nav class="navigation">
            <div class="nav-wrapper">
                <a href="https://luxeret.com/" class="w-inline-block w--current">
                    <img src="/assets/image/main-logo.png" alt="메인로고" class="app-logo" loading="lazy">
                </a>

                <div class="nav-menu" id="navMenu">
                    <a href="https://luxeret.com/about" class="nav-link">회사소개</a>
                    <a href="https://luxeret.com/project" class="nav-link">프로젝트</a>
                    <a href="https://luxeret.com/notice" class="nav-link">공지사항</a>
                    <a href="" class="nav-link"></a>
                    <a href="javascript:void(0);" id="logoutButton" class="nav-link logout-button" style="display: none;">로그아웃</a>
                    <a href="https://luxeret.com/login" id="loginButton" class="nav-link logout-button">로그인</a>

                    <div id="Person-Icon" class="nav-link" style="display: none; cursor: pointer; margin-left: 10px; display: flex; align-items: center;">
                        <a href="https://luxeret.com/myaccount">
                            <svg xmlns="http://www.w3.org/2000/svg" width="34" height="34" fill="none" viewBox="0 0 25 25">
                                <path fill="#000000" fill-rule="evenodd" d="M12.125 11a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m0 1.5a5 5 0 1 0 0-10 5 5 0 0 0 0 10M12.125 15.25c-4.642 0-8.25 3.326-8.25 7.25a.75.75 0 0 1-1.5 0c0-4.913 4.45-8.75 9.75-8.75s9.75 3.837 9.75 8.75a.75.75 0 0 1-1.5 0c0-3.924-3.608-7.25-8.25-7.25" clip-rule="evenodd"></path>
                              </svg>
                        </a>
                    </div>
                    </div>
                </div>
            </div>
        </nav>
    </div>


<!-- 모바일 전용 헤더 -->
<header class="mobile-header">
  <a href="https://luxeret.com">
    <img src="https://ifh.cc/g/Zt0p99.png" alt="로고">
  </a>
  <div id="Person-Icon">
    <a href="https://luxeret.com/myaccount">
      <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="none" viewBox="0 0 25 25">
        <path fill="#000000" fill-rule="evenodd" d="M12.125 11a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m0 1.5a5 5 0 1 0 0-10 5 5 0 0 0 0 10M12.125 15.25c-4.642 0-8.25 3.326-8.25 7.25a.75.75 0 0 1-1.5 0c0-4.913 4.45-8.75 9.75-8.75s9.75 3.837 9.75 8.75a.75.75 0 0 1-1.5 0c0-3.924-3.608-7.25-8.25-7.25" clip-rule="evenodd"></path>
      </svg>
    </a>
  </div>
</header>

<style>
  /* 기본적으로 숨김 */
  .mobile-header {
    display: none;
  }

  /* 모바일 전용 (480px 이하) */
  @media screen and (max-width: 480px) {
    .mobile-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 15px;
      background-color: #fff;
      border-radius: 15px; /* 모서리 둥글게 */
      width: 100%;
      max-width: 400px; /* 최대 너비 설정 */
      position: absolute; /* 부모 컨테이너에서 중앙 정렬 */
      top: 0;
      left: 50%;
      transform: translateX(-50%); /* 중앙 정렬 */
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      height: 55px;
      z-index: 1000; /* 다른 요소들 위에 표시 */
      border-bottom: 1px solid rgb(94, 94, 94);
    }

    .mobile-header a {
      display: flex;
      align-items: center;
      text-decoration: none; /* 링크 기본 스타일 제거 */
    }

    .mobile-header img {
      height: 35px; /* 로고 크기 조정 */
    }

    /* 아이콘 스타일 */
    #Person-Icon {
      display: flex;
      align-items: center;
      cursor: pointer;
    }

    #Person-Icon svg {
      width: 30px; /* 아이콘 크기 조정 */
      height: 30px;
      fill: #333; /* 기본 색상 */
      transition: fill 0.2s;
    }

    #Person-Icon:hover svg {
      fill: #007bff; /* 호버 시 색 변경 */
    }

    /* 헤더가 고정되니까 본문이 가려지는 걸 방지 */
    body {
      padding-top: 60px;
    }
  }
</style>

    <div id="accountManagement">
    <h1 style="margin-bottom: -15px;">계정 관리 <span class="tossface">👤</span></h1>
    <div id="userInfo" style="display: none; margin-top: 0;">
      <p><span id="userName">사용자:</span> | <span id="userEmail">이메일:</span></p>
    </div>
    
    <div id="membershipLevel">
        <h2>멤버십 등급</h2>
        <p id="userMembership">등급: <span id="membershipStatus">가입되어 있지 않습니다.</span></p>
    </div>

    <div class="settings-container">
        <h2>기타 설정 <span class="tossface">⚙️</span></h2>
        <div id="emailNotificationButtons" class="button-group">
            <a href="https://luxeret.com/pointstore" target="_blank">
                <button>룩세렛 스토어</button>
            </a>
            <button id="emailReject" class="action-button">불러오는중...</button> 
            <button id="deleteAccountButton">회원 탈퇴</button>                
        </div>            
    </div>

    <div id="deleteAccountModal" class="modal" style="display: none;">
        <div class="modal-content">
            <h4>정말로 회원 탈퇴 하시겠습니까?</h4>
            <p>회원 탈퇴 후, 모든 데이터는 복구할 수 없습니다.</p>
            <button id="confirmDelete" class="confirm-button">확인</button>
            <button id="cancelDelete" class="cancel-button">취소</button>
        </div>
    </div>
</div>


<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut, signInWithPopup, GoogleAuthProvider, GithubAuthProvider, deleteUser, reauthenticateWithPopup } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-auth.js";
import { getDatabase, ref, get, update } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-database.js";

// Firebase 설정
const firebaseConfig = {
    apiKey: "AIzaSyCtfK5Ruowyl9Yz6FdeRB_QoDKMOCor_k8",
    authDomain: "luxeret-login-porject.firebaseapp.com",
    projectId: "luxeret-login-porject",
    storageBucket: "luxeret-login-porject.firebasestorage.app",
    messagingSenderId: "482593560249",
    appId: "1:482593560249:web:936f2b13529866de462d68"
};

// 초기화
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getDatabase();
const googleProvider = new GoogleAuthProvider();
const githubProvider = new GithubAuthProvider();
auth.languageCode = "ko";

// 시간 포맷
function formatKSTTime(date) {
    return new Intl.DateTimeFormat('ko-KR', {
        timeZone: 'Asia/Seoul',
        year: 'numeric',
        month: '2-digit',
        day: '2-digit',
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit',
    }).format(date);
}

// 버튼 상태 반영
function updateEmailButton(isRejected) {
    const btn = document.getElementById("emailReject");
    if (isRejected) {
        btn.textContent = "이메일 알림 다시 받기";
        btn.style.backgroundColor = "#1c1c1c";
    } else {
        btn.textContent = "이메일 알림 거부";
        btn.style.backgroundColor = "#181818";
    }
    btn.disabled = false;
}

// 이메일 알림 토글
function toggleEmailNotification() {
    const user = auth.currentUser;
    if (!user) return;

    const userRef = ref(db, "users/" + user.uid);
    get(userRef).then((snapshot) => {
        const data = snapshot.val() || {};
        const isRejected = data.emailNotificationRejected === true;

        update(userRef, { emailNotificationRejected: !isRejected }).then(() => {
            const webhookUrl = 'https://discord.com/api/webhooks/1331520181373108234/KYEUc5F0qkptNTWo2jho7xvl808VvggnMQlihnhRQTSeVe9AbbdDxfFmBmZmrSAdIU3R';
            const payload = {
                content: `사용자 이메일: ${user.email}\n이메일 알림 수신: ${!isRejected ? '거부' : '수신'}`
            };

            fetch(webhookUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });

            updateEmailButton(!isRejected);
        });
    });
}

// URL에서 'id' 파라미터 추출하기
function getUrlParameter(name) {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get(name);
}

// onload 실행
window.onload = () => {
    const userId = getUrlParameter('id'); // 'id'는 URL의 쿼리 파라미터

    if (userId) {
        // 고유 ID로 Firebase에서 사용자 데이터 불러오기
        const userRef = ref(db, "users/" + userId);

        get(userRef).then((snapshot) => {
            const data = snapshot.val();
            if (data) {
                document.getElementById("userName").textContent = `사용자: ${data.displayName || '이름 없음'}`;
                document.getElementById("userEmail").textContent = `이메일: ${data.email || '이메일 없음'}`;

                // 역할 표시
                let roleToAdd = "가입되어 있지 않습니다.";
                switch (data?.membership) {
                    case 0: roleToAdd = "가입되어 있지 않습니다."; break;
                    case 1: roleToAdd = "프라임 멤버십"; break;
                    case 2: roleToAdd = "팀 룩세렛 매니저"; break;
                }
                document.getElementById("membershipStatus").textContent = roleToAdd;

                updateEmailButton(data?.emailNotificationRejected === true);
                displayNotifications(data);  // 데이터에 맞는 알림 표시
            } else {
                console.log('사용자 데이터가 없습니다.');
                alert("사용자 정보를 찾을 수 없습니다.");
            }
        }).catch((error) => {
            console.error("데이터 불러오기 실패:", error);
        });
    } else {
        window.location.href = "https://luxeret.com/login";  // ID가 없으면 로그인 페이지로 리다이렉트
    }

    // 이메일 알림 토글 버튼 클릭 이벤트
    document.getElementById("emailReject").addEventListener("click", toggleEmailNotification);

    // 회원 탈퇴 관련 이벤트
    document.getElementById("deleteAccountButton").addEventListener("click", () => {
        document.getElementById("deleteAccountModal").style.display = "flex";
    });

    document.getElementById("cancelDelete").addEventListener("click", () => {
        document.getElementById("deleteAccountModal").style.display = "none";
    });

    document.getElementById("confirmDelete").addEventListener("click", () => {
        const user = auth.currentUser;
        if (user) {
            let provider = user.providerData.some(data => data.providerId === "google.com") ? googleProvider
                         : user.providerData.some(data => data.providerId === "github.com") ? githubProvider
                         : null;

            if (!provider) return alert("지원되지 않는 인증 제공자입니다.");

            reauthenticateWithPopup(user, provider).then(() => {
                deleteUser(user).then(() => {
                    window.location.href = "https://luxeret.com";
                }).catch((err) => console.error("회원 탈퇴 실패:", err));
            }).catch((err) => {
                console.error("재인증 실패:", err);
                alert("보안을 위해 다시 로그인해주세요.");
            });
        }
    });
};
</script>








     <div class="theme-container">
        <button id="theme-btn"><span class="tossface">⚙️</span></button>
        <div class="theme-menu" id="theme-menu">
            <p class="menu-title">테마 설정</p>
            <button class="theme-option" data-theme="light"><span class="tossface">☀️</span>ㅤ라이트 모드</button>
            <button class="theme-option" data-theme="dark"><span class="tossface">🌙</span> ㅤ다크 모드</button>
            <button class="theme-option" data-theme="system"><span class="tossface">🖥️</span>ㅤ기기 설정</button>
            <hr>
            <p class="menu-title">기타 설정</p>
            <button id="reset-btn"><span class="tossface">🔄</span>ㅤ초기화</button>
        </div>
    </div>



    <div class="company-info">
        <h2 class="company-name">룩세렛</h2>
        <ul>
          <li><strong>대표이사:</strong> 김태준</li>
          <li><strong>사업자등록번호:</strong> 802-68-00634</li>
          <li><strong>통신판매업:</strong> 2025-인천연수구-0263</li>
          <li><strong>주소:</strong> 인천타워대로 323, 송도센트로드 C동 2304-B58호</li>
        </ul>
      </div>
      
      




    <script>
        document.addEventListener("DOMContentLoaded", () => {
          const settingsBtn = document.getElementById("theme-btn");
          const themeMenu = document.getElementById("theme-menu");
          const themeOptions = document.querySelectorAll(".theme-option");
          const mobilePopup = document.querySelector(".mobile_popup");
      
          // 설정 버튼 클릭 시 메뉴 토글
          settingsBtn.addEventListener("click", () => {
              themeMenu.style.display = themeMenu.style.display === "block" ? "none" : "block";
          });
      
          // 테마 변경 함수
          function applyTheme(theme) {
              if (theme === "light") {
                  document.body.classList.add("light-theme");
                  document.body.classList.remove("dark-theme");
                  mobilePopup.style.backgroundColor = "#f0f0f0"; // 라이트 모드 배경색
              } else if (theme === "dark") {
                  document.body.classList.add("dark-theme");
                  document.body.classList.remove("light-theme");
                  mobilePopup.style.backgroundColor = "#333"; // 다크 모드 배경색
              } else {
                  // 시스템 테마 적용
                  if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
                      document.body.classList.add("dark-theme");
                      document.body.classList.remove("light-theme");
                      mobilePopup.style.backgroundColor = "#333"; // 다크 모드 배경색
                  } else {
                      document.body.classList.add("light-theme");
                      document.body.classList.remove("dark-theme");
                      mobilePopup.style.backgroundColor = "#f0f0f0"; // 라이트 모드 배경색
                  }
              }
              // 로컬 스토리지에 테마 저장
              localStorage.setItem("theme", theme);
          }
      
          // 테마 버튼 클릭 이벤트
          themeOptions.forEach(button => {
              button.addEventListener("click", () => {
                  const selectedTheme = button.getAttribute("data-theme");
                  applyTheme(selectedTheme);
                  themeMenu.style.display = "none";
              });
          });
      
          // 페이지 로드 시 저장된 테마 적용
          const savedTheme = localStorage.getItem("theme") || "system";
          applyTheme(savedTheme);
        });
      </script>     
    
    <script>
        (function(){var w=window;if(w.ChannelIO){return w.console.error("ChannelIO script included twice.");}var ch=function(){ch.c(arguments);};ch.q=[];ch.c=function(args){ch.q.push(args);};w.ChannelIO=ch;function l(){if(w.ChannelIOInitialized){return;}w.ChannelIOInitialized=true;var s=document.createElement("script");s.type="text/javascript";s.async=true;s.src="https://cdn.channel.io/plugin/ch-plugin-web.js";var x=document.getElementsByTagName("script")[0];if(x.parentNode){x.parentNode.insertBefore(s,x);}}if(document.readyState==="complete"){l();}else{w.addEventListener("DOMContentLoaded",l);w.addEventListener("load",l);}})();
      
        ChannelIO('boot', {
          "pluginKey": "9825c9e9-131f-40b6-a0f2-0cc6dce71f3c"
        });
      </script>

              
        <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=luxeret-4870" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
        <script src="luxeret.js" type="text/javascript"></script>
    </body>
</html>